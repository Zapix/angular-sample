<div class="page-header">
  <h2>Profile page</h2>
</div>
<div ng-show="!editMode">
  <table class="table table-striped">
    <tr>
      <th>Username:</th>
      <td>{{ profile.username }}</td>
    </tr>
    <tr>
      <th>Email:</th>
      <td>{{ profile.email }}</td>
    </tr>
    <tr>
      <th>First name:</th>
      <td>{{ profile.first_name }}</td>
    </tr>
    <tr>
      <th>Last name:</th>
      <td>{{ profile.last_name }}</td>
    </tr>
    <tr>
      <th>Birthday</th>
      <td>{{ profile.birthday }}</td>
    </tr>
  </table>
  <div>
    <button class="btn btn-primary" ng-click="edit()"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>&nbsp;Edit</button>
    <a href="#/profile/change-password">Change password</a>
  </div>
</div>
<div ng-show="editMode">
  <form name="form" novalidate>
    <div class="row">
      <div class="col-lg-offset-4 col-lg-4 col-md-offset-3 col-md-6 col-sm-12">
        <div class="form-group">
          <label for="email">Email:</label>
          <input
            type="email"
            id="email"
            name="email"
            class="form-control"
            ng-model="editingProfile.email" />
        </div>
        <div ng-show="form.$submitted || form.email.$touched">
          <div class="alert alert-danger" ng-show="form.email.$error.email">Enter vaild email</div>
          <div class="alert alert-danger" ng-repeat="error in serverErrors.email">{{ error }}</div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-offset-4 col-lg-4 col-md-offset-3 col-md-6 col-sm-12">
        <div class="form-group">
          <label for="first_name">First name:</label>
          <input
            type="text"
            id="first_name"
            name="first_name"
            class="form-control"
            ng-model="editingProfile.first_name" />
        </div>
        <div ng-show="form.$submitted || form.first_name.$touched">
          <div class="alert alert-danger" ng-repeat="error in serverErrors.first_name">{{ error }}</div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-offset-4 col-lg-4 col-md-offset-3 col-md-6 col-sm-12">
        <div class="form-group">
          <label for="first_name">Last name:</label>
          <input
            type="text"
            id="last_name"
            name="last_name"
            class="form-control"
            ng-model="editingProfile.last_name" />
        </div>
        <div ng-show="form.$submitted || form.last_name.$touched">
          <div class="alert alert-danger" ng-repeat="error in serverErrors.last_name">{{ error }}</div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-offset-4 col-lg-4 col-md-offset-3 col-md-6 col-sm-12">
        <div class="form-group">
          <label for="birthday"></label>
          <input
            type="text"
            id="birthday"
            name="birthday"
            class="form-control"
            pattern="[0-9]{4}\-[0-1][0-9]\-[0-9]{2}"
            ng-model="editingProfile.birthday" />
        </div>
        <div ng-show="form.$submitted || form.birthday.$touched">
          <div class="alert alert-danger" ng-show="form.birthday.$error.pattern">Please enter correct date. YYYY-MM-DD </div>
          <div class="alert alert-danger" ng-repeat="error in serverErrors.birthday">{{ error }}</div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-offset-4 col-lg-4 col-md-offset-3 col-md-6 col-sm-12">
        <div class="pull-right">
          <button class="btn btn-danger" ng-click="quitEditMode()">Cancel</button>
          <button type="submit" class="btn btn-success" ng-click="update(form, editingProfile)">Update</button>
        </div>
      </div>
    </div>
  </form>
</div>
